{
  "recipe_id": "This_Is_Artist_v1_006",
  "name": "Single Artist Metadata & Play Count Based Playlist",
  "user_parameters": {
    "target_artist": "{{TARGET_ARTIST}}",
    "desired_track_count": "{{DESIRED_TRACK_COUNT}}"
  },
  "llm_config": {
    "max_output_tokens": 2000,
    "temperature": 0.8,
    "model_name": "google/gemini-2.5-flash"
  },
  "model_instructions": "You are a world-class music curator creating a 'This Is {{TARGET_ARTIST}}' playlist of {{DESIRED_TRACK_COUNT}} tracks. CURATION RULES: 1. DIVERSITY IS PARAMOUNT: **NEVER** group tracks from the same album consecutivelyâ€”mix albums and release years throughout. 2. Prioritize tracks with high local_library_likes and play_count (10+ plays are major hits). 3. Ensure chronological breadth by mixing old and new releases. 4. Vary energy levels and moods. 5. Start with 2-3 iconic hits (use internal knowledge to identify singles/revered tracks), end with a memorable track. 6. Maximum 3 total tracks per album, spread throughout the playlist. Respond with JSON: {\"track_ids\": [\"id1\", \"id2\", ...], \"reasoning\": \"Brief explanation of curation strategy and flow\"}",
  "global_strategy": {
    "final_track_count": 25,
    "tie_breaker_priority": ["local_library_likes", "play_count", "release_year"],
    "weights": {
      "local_library_likes": 0.7,
      "play_count": 0.3,
      "release_year": 0.0,
      "track_name": 0.0
    },
    "waiting": {
      "max_tracks_consecutive_album": 2,
      "max_tracks_per_album": 5,
      "min_albums_represented": 4
    }
  },
  "processing_steps": [
    {
      "step_id": 1,
      "title": "Super Hits & User Favorites (Top Priority)",
      "priority_score": 10,
      "target_track_count": 12,
      "description": "Select the highest-rated and most-played tracks to form the core of the playlist.",
      "filters": [
        {"field": "artist_name", "operator": "EQUAL_TO", "value": "{{TARGET_ARTIST}}"},
        {"field": "local_library_likes", "operator": "EQUAL_TO", "value": true},
        {"field": "play_count", "operator": "GREATER_THAN", "value": 10},
        {"field": "genre", "operator": "IN", "value": "{{STEP1_GENRES_IN}}"}
      ]
    },
    {
      "step_id": 2,
      "title": "Catalogue Fillers (Mid Priority)",
      "priority_score": 7,
      "target_track_count": 8,
      "description": "Select popular tracks that may not be 'liked' but have high play counts, diversifying across the entire catalogue.",
      "filters": [
        {"field": "artist_name", "operator": "EQUAL_TO", "value": "{{TARGET_ARTIST}}"},
        {"field": "play_count", "operator": "BETWEEN", "value": [3, 10]},
        {"field": "local_library_likes", "operator": "EQUAL_TO", "value": false},
        {"field": "genre", "operator": "NOT_IN", "value": "{{STEP2_GENRES_OUT}}"}
      ]
    },
    {
      "step_id": 3,
      "title": "Essential Album Tracks (Diversity/Lowest Priority)",
      "priority_score": 4,
      "target_track_count": 5,
      "description": "Fill the remainder with a mix of tracks from different, older albums to ensure the breadth of their career is covered.",
      "filters": [
        {"field": "artist_name", "operator": "EQUAL_TO", "value": "{{TARGET_ARTIST}}"},
        {"field": "release_year", "operator": "LESS_THAN", "value": 2010},
        {"field": "genre", "operator": "IN", "value": "{{STEP3_GENRES_IN}}"}
      ]
    }
  ]
}
